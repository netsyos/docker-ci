language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: gOwKpzqtNY63PMTiTIPQHxJR0b+c3Cn/pzFp4UD4qF1CbmyH1Y7eYtJEwb4i6ytABXtfZOXDHDHvmKLBPHK0eROf8BsDk9jt4yS5vEdrjzPzzYAiAuejdh5KlQKllAoI62d8tA9O2r2PHyddS+cHAcwcVF6PY/gb71QlT1aj34DuLVqDpsmf7x8sn7sl//hr0HNKKoO7FB9fiaOD6HDanRpsD3eCEzatBkxvtJHaYPR04/iGLUtsdMf7L8SqClR2oPm4y9mF9Z3JZxlGNgpY+kKwQtiY9gNr25U2/VufzDVrOMuEn7ymoJwQNsCDUohTZkCzokr8iLj8zuL3GFcvYA+UNihrC9iVgkR0Q8kFKXhspq02zZEpnYO2afbMa0DTvJQA1cynZbiT/UIAe9QeLaboZzuzZ3YQ+jIz3oUOnWHOSt1jx4q8h8CL7A8UuyNXWF09iLom0cvdlzDjGYeVeDgglHkD+6rXJmXOqatjcNuXysTG+fJAGYrcC58TwBpUWq4OZ7rIfhftk/8zs+b++LYH36zL95dxPL3z2P+Dutk/0yS1MFPRxbMIrAQEwVJcLI5cQZT6SBeM03+oXM+FVe3mpx3j+WX3iQZBTjzjvaoKHZjCnjGBBoJoI+Ll5RKsk3oSaJPA/nL53Vd8gXsdZxtNDILl0AXJV943wppdCKM=
  - secure: sCsG4EA58dS9dqw3BUUp5pOc/l8JqKRZJYhKCnGYT0tC1TlgU3TZikPWog3uUBgWFQhyWgQC6+717S+CYBVnBarCp7N4CFpjDnICuedHiqsjj9SytiWBriICQww7AwFA2YY1vp3lmomDjsMtTfh88/B0i6D7vtZYcUXy5p1IXbqBdSkgGztb8ZTSpitYe+bqCTQYwimsnJ8iT3eZrJ55gEklP9tzFSXDAVkFxj+jg24M4SP9xMnYZJIb+W6N9XrJh4z7OQfvCFavoATEeWBuNcfQnq4pCgo/Zy+S2EA4TpgZdfPjxoLoniVxXYb50HwtonlAtUHV19UJt2s0fgAzQWBySVoxcEonaF3wDKpV5o878aJ8+Tl9VIaFm5nc55e7t1N9UbB5Gv+kBsDwMRlQvp1A/6pA08OZc2x06ECM5fvwEXjQk2M5HOEF9+Qp5F4B0O1u+gN/9K+uv6vpz8TIDOHsNN1q6RTdHRJDcg3zBTVErlKjUliIJdgPkddAOV2CWw4OXJ01TU6RMbVLined9s85OUjK/57D58o2qiWIGYTc84VQ5KPL3WP67uroVhVmk4TawFwcpMKs97y9NQQwxkhtLP+BvPbw6a7qbd/F60zoVeCQRsHa8xZQnGgKCEpNgCI302qgLpTqh3Tv46qfedxFLVCYxl0Phsv2u718yxw=
  - secure: Z2Ie2TvyceGd0I8POtAeB0h7XLKVacPRdrHH6y7LKIijHV56WFNrGfsZMvGLh9GxSKurLkYcc4i8gVuoTQfx67fbVTe8LuErk1UBhVPAJkZ1gNLGX9brKyF8Q0x4DINdfAOKLvehyjJpdhi38I/GoMwWxn/a6gM5UyUsTJiO9F3us/kmKvuYRCiXRR3QuvOkMOmT+a3xdO6p+gKauovD6jV8RmKl4nyXYGcJU1EE52/QXqE4GIqe7f+G27XFWW3cR0mLUW4x60YYPaIFSTXLxI3VWsWWO6e0+66cNgvCFBzb0uj79swHHQbiQnUg0ulJdzQ8HoL1GjyCBR3+L33l/69YciViCTxWFbktuazTBL691xxRr4vyLSrk8MC6rYqzuwY+autXZF358q/Ob2OUInaGCEIhrUwGa+d+BIHZ/QFc4WNGOy19gq0HHG1krZg7oAcfE2sKPoVSY9DuL20jMyLe9v8AFdNY/ilQ4s5onPNIofgjiFnWMrtTpDKTsYlnsmJH6kPh3lsvumHMQcVnBFD2MaqHYZnqMOXAORvTKZOGta5k+Pw8Bmn+2Ce92qV8+JCvyP5MhXPmRxAR7+fLOu1VLdDF4SfXpKsklXT1GckbFQg+Kb6nGz9SCd0H62N90BlMemyMCfGN6xY22MnE209bSwi/D9vtRMyas5nSAKE=
script:
- ls -alh
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/ci
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: ZwootGv3Ia8qn0RV4iU0brk1IZe/f8P/PVUfMwtSlppblY2aYrISMdjxuqQEHvx0wKW0ijqXcTCrq3PpdkUx0v5OInaBlDqS6pXW0WiNrzpgoBonZoeG0p1DWp1m+grpUDCPbYycMwIBJ3i0jKp2p72jsLk+poWuG/O4XQmPG75cdvwOycMzzWxx72EoZifkxvY5jqxBaFySqPB53yvCHkRscGIfnUfrOA+WEZeRttVsJ1r8vecB2ajM8Z8rec59s+7X2BSCbBNidemWzLwYdRGpA1HMkovd+wxt451ImDquzgvEi4U40/JbEXtu7R5NnmxfyOs0z8K2bAmUozlMXrcDGXrFFlKa8cbpx7VM1gucNBfNr8MKyiw0je/mKS2Nxip4qqzQkMk/ifs5irFeYNKO2FHpnGuwl4qbsHjMKe45nd++BRjRvr5FNpGumdqhtXuVy703PO0g2zHI4h6Hy5s3e0eZlyS/7SjRskEzjmIZKGj2E4gPtTsxfDheZaWNTiwqysvQEQeviUHpRzVVVPYtGi7gmGIIMAYAEFImeyezcsCxvzoj0i/Hf36ut7vCH1P4TmdbddELZufEhYbvOnxwS3kFXc9IHiVFS530yuCVaJKavp8T1HF1pd+NUoUKUoDv7RmmMoMKbGdVRM1OZeztFcSXUpLBXHOvoggOe00=
